<!-- intro.html -->

<dom-module id="simon-intro">
    <template>
	<style>
		@charset "utf-8";
		/* CSS Document */

		.fill {
				width: 100%;
				height: 100%;
				min-height: 100%;
		}

		.intro {
			/*overflow: auto;*/
			position: fixed;
			/*background-position: center;*/
			/*background: url('https://c1.staticflickr.com/1/425/31987276322_e2c3ca8f08_o.jpg');*/
			background-size: cover;
		}

		.intro .container {
			/*display: flex;*/
			width: 100%;
			height: 100%;
			min-height: 100%;
			/*justify-content: center;*/
		}

		.intro .title {
			margin: 15% auto 0 auto;
		}

		.filter {
			position: fixed;
		}

		.pre {
			text-align: center;
			font-family: "Segoe UI Light", "Segoe UI";
			font-weight: lighter;
			font-size: 16px;
			/*opacity: 0;*/
			cursor: default;
		}

		.name_enter {
			display: table;
			margin: 0 auto;
			padding-left: 15px;
		}

		.name {
			text-align: center;
			padding-right: 15px;
			font-size: 80px;
			font-family: 'Neil';
			font-weight: normal;
			font-style: normal;
			opacity: 0;
			cursor: default;
		}

		paper-button[disabled] {
			background: transparent;
		}

		.pre {
			opacity: 0;
		}

		.enter {
			color: #333;
			font-size: 12px;
			padding: 20px 15px;
			opacity: 0;
			/*cursor: pointer;*/
			text-align: right;
		}

		.enter_text {
			font-family: "Segoe UI Light", "Segoe UI";
			font-weight: lighter;
		}

		.enter .arrow {
			font-size: 1em;
		}

		.pre.toggled,
		.name.toggled,
		.enter.toggled .enter_text,
		.enter.toggled .arrow {
			color: #FFFFFF;
		}

		.text-right {
			text-align: right
		}

		@media (max-width:1080px) {
			.filter {
				background-color: rgba(0, 0, 0, 0.5);
			}

			.title {
				margin: 0 !important;
				width: 100%;
				min-height: 100vh;
				display: flex;
				align-items: center;
				justify-content: center;
			}

			.pre, .name, .enter {
				color: #FFFFFF
			}

      .pre {
        font-size: 1.3vmax;
      }

      .name {
        font-size: 7vmax;
      }

      .enter {
        font-size: 1vmax;
      }
		}

		/*@media (max-width:1372px) {
			.enter {
				color: #FFFFFF
			}
		}*/
	</style>

	<div class="intro fill">
		<div class="filter fill"></div>
		<div class="title">
			<div class="intro_content">
				<div class="pre">
					All about my journey. All about my lifestyle.
				</div>
				<div class="name_enter">
					<div class="name">
						Simon Cheng
					</div>
					<div class="text-right">
						<paper-button class="enter" disabled="{{disabled}}" on-tap="leave">
							<span class="arrow">â–º</span>
							<span class="enter_text">Enter</span>
						</paper-button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- <div class='route_loading' ng-hide="loading_complete"><span>Loading<i class='fa fa-cog fa-spin'></i></span></div> -->

	<iron-signals on-iron-signal-loading-complete="loading_complete"></iron-signals>

	</template>

    <script>
        class introControl extends HTMLElement {
            beforeRegister() {
                this.is = 'simon-intro';
                this.properties = {
                    disabled: {
                        type: Boolean,
                        value: true
                    }
                };
            }

            ready() {
                // this.width = window.innerWidth;
            }

            loading_complete(data) {

                let intro_bg = data.detail[1];
                console.log(intro_bg);
                this.$$('.intro').style.backgroundImage = "url(" + intro_bg + ")"

                TweenMax.fromTo(this.$$('.pre'), 1, {
                    opacity: 0,
                    y: 20
                }, {
                    opacity: 1,
                    y: 0,
                    ease: Power2.easeOut
                }).delay(1);
                TweenMax.fromTo(this.$$('.name'), 1, {
                    opacity: 0,
                    y: 20
                }, {
                    opacity: 1,
                    y: 0,
                    ease: Power2.easeOut
                }).delay(2);
                TweenMax.fromTo(this.$$('.enter'), .3, {
                    opacity: 0,
                    x: 5
                }, {
                    opacity: 1,
                    x: 0,
                    ease: Power2.easeOut,
                    onComplete() {
                        this.disabled = false;
                    },
                    onCompleteScope: this
                }).delay(4);

            }

            leave() {
                TweenMax.fromTo(this.$$('.pre'), .7, {
                    opacity: 1,
                    y: 0
                }, {
                    opacity: 0,
                    y: -10,
                    ease: Power2.easeIn,
                    onComplete() {
                        // console.log('firing signal');
                        this.fire('iron-signal', {
                            name: "intro-ready",
                            data: null
                        });
                    },
                    onCompleteScope: this
                });
                TweenMax.fromTo(this.$$('.name'), .5, {
                    opacity: 1,
                    y: 0
                }, {
                    opacity: 0,
                    y: -10,
                    ease: Power2.easeIn
                });
                TweenMax.fromTo(this.$$('.enter'), .3, {
                    opacity: 1,
                    x: 0
                }, {
                    opacity: 0,
                    x: -5,
                    ease: Power2.easeIn,
                    onComplete() {
                        this.disabled = true;
                    },
                    onCompleteScope: this
                });

            }

        }
        Polymer(introControl);
    </script>
</dom-module>
