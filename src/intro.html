<!-- intro.html -->

<dom-module id="simon-intro">
	<template>
	<style>
		@charset "utf-8";
		/* CSS Document */

		@font-face {
		    font-family: togekk;
		    src: url(../fonts/font.ttf);
		}

		.fill {
				width: 100%;
				height: 100%;
				min-height: 100%;
		}

		.intro {
			/*overflow: auto;*/
			position: fixed;
			/*background-position: center;*/
			background: url('https://c1.staticflickr.com/1/425/31987276322_e2c3ca8f08_o.jpg');
			background-size: cover;
		}

		.intro .container {
			/*display: flex;*/
			width: 100%;
			height: 100%;
			min-height: 100%;
			/*justify-content: center;*/
		}

		.intro .title {
			margin: 15% auto 0 auto;
		}

		.pre {
			text-align: center;
			font-family: "Segoe UI Light", "Segoe UI";
			font-weight: lighter;
			font-size: 16px;
			/*opacity: 0;*/
			cursor: default;
		}

		.name_enter {
			display: table;
			margin: 0 auto;
			padding-left: 15px;
		}

		.name {
			text-align: center;
			padding-right: 15px;
			font-size: 80px;
			font-family: togekk;
			opacity: 0;
			cursor: default;
			/*-webkit-animation: TitleAni 1s ease-out forwards 3s;
	-moz-animation: TitleAni 1s ease-out forwards 3s;
	-ms-animation: TitleAni 1s ease-out forwards 3s;
	animation: TitleAni 1s ease-out forwards 3s;*/
		}

		/*button {
		    background: transparent;
		    outline: none;
		    border: none;
		}*/

		/*a.button, a.button:hover {
		    text-decoration: none;
		}*/

		paper-button[disabled] {
			background: transparent;
		}

		.enter {
			color: #333;
			font-size: 12px;
			padding: 20px 15px;
			opacity: 0;
			/*cursor: pointer;*/
			text-align: right;
		}

		.enter_text {
			font-family: "Segoe UI Light", "Segoe UI";
			font-weight: lighter;
		}

		.enter .arrow {
			font-size: 1em;
		}

		.pre.toggled,
		.name.toggled,
		.enter.toggled .enter_text,
		.enter.toggled .arrow {
			color: #FFFFFF;
		}

		.text-right {
			text-align: right
		}

		@media (max-width: 400px) {
			.name {
				font-size: 12vmax;
			}
		}
	</style>

	<div class="intro fill">
		<div class="title">
			<div class="pre">
				All about my journey. All about my lifestyle.
			</div>
			<div class="name_enter">
				<div class="name">
					Simon Cheng
				</div>
				<div class="text-right">
					<paper-button class="enter" disabled="{{disabled}}" on-tap="leave">
						<span class="arrow">â–º</span>
						<span class="enter_text">Enter</span>
					</paper-button>
				</div>
			</div>
		</div>
	</div>
	<!-- <div class='route_loading' ng-hide="loading_complete"><span>Loading<i class='fa fa-cog fa-spin'></i></span></div> -->

	</template>

	<script>



	// window.addEventListener("WebComponentsReady", function (e) {
	// 	console.log(document.querySelector("simon-intro"));
	// 		// document.querySelector("simon-intro").fire('iron-signal', {name: "foo", data: "Foo!"});
	// });

		class introControl extends HTMLElement {
			beforeRegister() {
				this.is = 'simon-intro';
				this.properties = {
					disabled: {
						type: Boolean,
						value: true
					}
				};
			}

			// load(url) {
			// 			let completedPercentage;
		  //        let xmlHTTP = new XMLHttpRequest();
		  //        xmlHTTP.open('GET', url,true);
		  //        xmlHTTP.responseType = 'arraybuffer';
		  //        xmlHTTP.onload = function(e) {
		  //            let blob = new Blob([this.response]);
		  //            let src = window.URL.createObjectURL(blob);
		  //        };
		  //        xmlHTTP.onprogress = function(e) {
		  //            completedPercentage = parseInt((e.loaded / e.total) * 100);
			// 					//  console.log(completedPercentage);
			// 					 document.querySelector("simon-intro").fire('iron-signal', {name: "intro-completed-percentage", data: completedPercentage});
			//
		  //        };
		  //        xmlHTTP.onloadstart = function() {
		  //            completedPercentage = 0;
		  //        };
		  //        xmlHTTP.send();
		  //    };

			ready() {
				// console.log(this);
				// this.load('https://c1.staticflickr.com/1/425/31987276322_e2c3ca8f08_o.jpg');

				TweenMax.fromTo(this.$$('.pre'), 1, {
					opacity: 0,
					y: 20
				}, {
					opacity: 1,
					y: 0,
					ease: Power2.easeOut
				}).delay(2);
				TweenMax.fromTo(this.$$('.name'), 1, {
					opacity: 0,
					y: 20
				}, {
					opacity: 1,
					y: 0,
					ease: Power2.easeOut
				}).delay(3);
				TweenMax.fromTo(this.$$('.enter'), .3, {
					opacity: 0,
					x: 5
				}, {
					opacity: 1,
					x: 0,
					ease: Power2.easeOut,
					onComplete: function() {
						this.disabled = false;
					},
					onCompleteScope: this
				}).delay(5);

			}

			leave() {
				TweenMax.fromTo(this.$$('.pre'), .7, {
					opacity: 1,
					y: 0
				}, {
					opacity: 0,
					y: -10,
					ease: Power2.easeIn,
					onComplete: function() {
						console.log('firing signal');
						document.querySelector("simon-intro").fire('iron-signal', {name: "foo", data: "Foo!"});
					}
				});
				TweenMax.fromTo(this.$$('.name'), .5, {
					opacity: 1,
					y: 0
				}, {
					opacity: 0,
					y: -10,
					ease: Power2.easeIn
				});
				TweenMax.fromTo(this.$$('.enter'), .3, {
					opacity: 1,
					x: 0
				}, {
					opacity: 0,
					x: -5,
					ease: Power2.easeIn,
					onComplete: function() {
						this.disabled = true;
					},
					onCompleteScope: this
				});

			}

		}
		Polymer(introControl);
	</script>
</dom-module>
