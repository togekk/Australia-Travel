<!--
`travel-element`
Traveling

@demo demo/index.html
-->
<link rel="import" href="../elements.html">

<dom-module id="my-app">
    <template>

    <style>
      :host {
        display: block;
      }

      .fill {
        width: 100%;
        height: 100%;
        min-height: 100%;
        z-index: -99;
      }

      .bg_container {
        overflow: auto;
        position: fixed;
      }

      .bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        min-height: 100%;
      }

      .img1 {
        background: url('https://c1.staticflickr.com/1/500/31292096464_7fff3afb91_o.jpg') no-repeat center fixed;
        background-size: cover;
      }

      .img2 {
        background: url('https://c1.staticflickr.com/1/639/31984481622_21f64c3316_o.jpg') no-repeat center fixed;
        background-size: cover;
      }

      .img3 {
        background: url('https://c1.staticflickr.com/1/290/32014565831_c5018c88be_o.jpg') no-repeat center fixed;
        background-size: cover;
      }

      .img4 {
        background: url('https://c1.staticflickr.com/1/452/32133092055_083747ced8_o.jpg') no-repeat center fixed;
        background-size: cover;
      }

      .filter {
        background-color: rgba(0, 0, 0, 0.5);
      }

      .text {
        /*padding: 10% 3% 3% 3%;*/
        line-height: 7vh;
        color: #FFFFFF;
        display: flex;
      }

      .fadein {
        opacity: 0;
      }

      .prologue {
        line-height: 5vh;
        flex: 6;
      }

      .bleed {
        flex: 3;
      }

      .prologue p {
        margin-bottom: 3vh;
      }

      .text h2 {
        margin-top: 10%
      }

      .scroll_hint,
      .prologue_box {
        position: absolute;
        top: 0;
        left: 0;
        color: #FFFFFF;
        width: 100%;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .content {
        margin-top: 7500px;
        padding-top: 500px;
        flex: 20
      }
    </style>

    <div class="bg_container fill">
  		<div class="bg img4 fill"></div>
  		<div class="bg img3 fill"></div>
  		<div class="bg img2 fill"></div>
  		<div class="bg img1 fill"></div>

  		<div class="bg filter fill"></div>

  		<div class="scroll_hint">
  			<span>Scroll down</span>
  		</div>

  		<div class="prologue_box">
        <div class="bleed"></div>
  			<div class="prologue text_fadeout">
  				<p id="fadein0" class="fadein">
  				</p>
  				<p id="fadein1" class="fadein">
  					I still don&#39;t know where this flight will take me.
  				</p>
  				<p id="fadein2" class="fadein">
  					I still don&#39;t know where this road will lead me.
  				</p>
  				<p id="fadein3" class="fadein">
  					But one thing I know for sure,
  				</p>
  				<p id="fadein4" class="fadein">
  					This will change my life forever.
  				</p>
  				<p id="fadein5" class="fadein">
  				</p>
  				<p id="fadein6" class="fadein">
  				</p>
  				<p id="fadein7" class="fadein">
  				</p>
  				<p id="fadein8" class="fadein">
  					The night before I left Taiwan, I asked myself over and over again if I have to do this. Yeah, first time being a backpacker. First time traveling alone. First time speaking English. And first time doing everything on my own without any help from travel
  					agencies.
  				</p>
  			</div>
        <div class="bleed"></div>

  		</div>
  	</div>


  	<div class="text text_fadeout">

      <div class="bleed" on-mouseover="onHovered" on-mouseout="onUnhovered"></div>

  		<div class="content">
  			<h2 class="switch">22.03.2013
  			</h2>
  			<p>&nbsp;
  			</p>
  			<p>
  				Sydney, the biggest city in Australia. Everything&#39;s so big and so complex. Especially the Central Station. When I arrived in there I was totally shocked. 21 platforms! Never seen so many in my life. And every street is extremely busy. Alright, I have
  				to head for the hostel to put my luggage so that everything will be easier.
  			</p>
  			<p>
  				The hostel located near the small beach which probably few backpackers knows about it -- Coogee Beach. I only checked one bus called &quot;M50&quot; and saved a screenshot in my phone, so I had to find the bus since I had no Internet. Well, or since I
  				was too self-confident. So I spent 2 hours, dragging my 36kg luggage, running in circle and asking around Central station, but just couldn&#39;t find any signs showing M50. I did find one, but it was in the wrong direction. That luggage nearly killed
  				me, and I&#39;ll swear I&#39;ll never do that again.
  			</p>
  			<p>
  				When I finally arrived at Coogee Beach, it was already 2pm. I rang the hostel&#39;s doorbell, no one answered. I looked up to the sign near the door. &quot;Office Hour: 9am-1pm, 5pm-10pm&quot; Wait, what? They have lunch break? So I just dragged my luggage
  				again back to the beach. I was so tired but I couldn&#39;t sleep. I felt so insecure about my stuff will get stolen anytime.
  			</p>
  			<p class="switch">
  				&nbsp;
  			</p>
  			<p class="pin_trigger"></p>
  			<div class="pin_point">
  				<p>
  					I walked down to the beach. Sat down on the bench. Staring at the crowd playing beach ball, lying in the sand, enjoying every piece of sunshine.
  				</p>
  				<p>&nbsp;
  				</p>
  				<p>I&rsquo;ve never felt so confused about my life. Few days ago I was still struggling in the last lines of my coding, arguing with my supervisor. And now I&rsquo;m suddenly here, enjoying the freedom at last. Or is this all real?
  				</p>
  			</div>
  			<p>&nbsp;
  			</p>

  			<p>Finally they let me in. The hostel wasn&rsquo;t quite big. I thought there should be an elevator or something, but again, I had to walk up the stairs wth my 36kg luggage. That was the longest day of my life, fortunately a guy gave me a hand and guided
  				me to the reception, which was on the top floor. Finally! But the guy at the reception told me I have to pay like 40 AUD more beside the deposit. What? I thought I pay all of it online already! The traveler cheques are the only thing I had with me.
  			</p>
  			<p>&ldquo;Do you accept credit cards? Or traveler&rsquo;s cheques&hellip;&hellip;?&rdquo;
  			</p>
  			<p>&ldquo;No. Sorry we only accept cash.&rdquo;
  			</p>
  			<p>It was nearly 6pm, so I rushed downstairs and finally found a bank on the street, which was so nice to open the door for me before it closed. Otherwise I&rsquo;ll be homeless.
  			</p>
  			<p>&ldquo;We&rsquo;re closing now, but you&rsquo;re a backpacker, I will open the door for you. I know backpackers need money.&rdquo;
  			</p>
  			<p>That was the warmest words for my life!
  			</p>


  			<p class="switch">
  				&nbsp;
  			</p>
  			<h2>23.03.2013
  			</h2>
  			<p>&nbsp;
  			</p>
  			<p>That was a very nice beach town. I watched the sunrise from the window. Everything was so peaceful like a picture.
  			</p>
  			<p>So after arriving in Australia, the first thing to do is get three numbers: Phone Number, Tax File Number and Bank Account Number. I had to get phone number first, plus I didn&rsquo;t want to keep my family worried. So I bought a SIM card in the store
  				and tried to activate it. That was my first time having a conversation in English, and guess what? The costumer service had a very strong accent, so I totally couldn&rsquo;t understand what he was talking about. He had to repeat every question 3 times
  				until I understand what he was talking about. So he went crazy, and I went crazy, too.
  			</p>
  			<p>Finally got it done. So I hopped on the bus and went straight to the city centre.
  			</p>
  		</div>

      <div class="bleed" on-mouseover="onHovered" on-mouseout="onUnhovered"></div>

  	</div>


  </template>

    <script>
        'use strict';

        class scrollControl extends HTMLElement {

            beforeRegister() {
                this.is = 'my-app';
                this.properties = {

                }
            }

            ready() {
                // init controller
                const controller = new ScrollMagic.Controller();
                const text_fadein = Polymer.dom(this.root).querySelectorAll(
                    '.fadein');
                const slides = Polymer.dom(this.root).querySelectorAll(
                    '.switch');

                new ScrollMagic.Scene({
                        offset: 1
                    })
                    .setTween(this.$$(
                            '.scroll_hint'),
                        0.5, {
                            opacity: 0
                        })
                    .addTo(controller); // assign the scene to the controller
                for (let i = 0; i < text_fadein.length; i++) {
                    new ScrollMagic.Scene({
                            duration: 1000,
                            offset: 500 * i
                        })
                        .setTween(this.$$('#fadein' + i), {
                            opacity: 1
                        })
                        .addTo(controller); // assign the scene to the controller
                };
                new ScrollMagic.Scene({
                        triggerElement: this.$$('.content'),
                    })
                    .setTween(this.$$('.prologue_box'),
                        0.5, {
                            opacity: 0
                        })
                    .addTo(controller); // assign the scene to the controller
                let j = 1;
                for (let slide of slides) {
                    // create a scene
                    new ScrollMagic.Scene({
                            triggerElement: slide,
                            duration: 300,
                            // offset: 50
                        })
                        .setTween(this.$$('.img' + j), {
                            opacity: 0
                        }) // pins the element for the the scene's duration
                        .addTo(controller); // assign the scene to the controller
                    j = j + 1;
                };
                new ScrollMagic.Scene({
                        triggerElement: this.$$('.pin_trigger'),
                        triggerHook: 0.25,
                        duration: 500
                    })
                    .setPin(this.$$('.pin_point'))
                    .addTo(controller); // assign the scene to the controller

            }

            onHovered() {

                const text_fadeout_all = Polymer.dom(this.root).querySelectorAll(
                    '.text_fadeout');
                for (let text_fadeout of text_fadeout_all) {
                    TweenMax.to(text_fadeout, .4, {
                        opacity: 0.1,
                    })
                }
                TweenMax.to(this.$$('.filter'), .4, {
                    opacity: 0,
                });

            }

            onUnhovered() {

                const text_fadeout_all = Polymer.dom(this.root).querySelectorAll(
                    '.text_fadeout')
                for (let text_fadeout of text_fadeout_all) {
                    TweenMax.to(text_fadeout, .4, {
                        opacity: 1,
                    })
                }
                TweenMax.to(this.$$('.filter'), .4, {
                    opacity: 1,
                })

            }


        }

        Polymer(scrollControl);
    </script>
</dom-module>
